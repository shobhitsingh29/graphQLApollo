(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{5:function(e,t,n){e.exports={container:"main_container__1EJEP",innerContainer:"main_innerContainer__30OS9",meetName:"main_meetName__2KSBi",btnContainerAddMeet:"main_btnContainerAddMeet__3pL8C",btnContainer:"main_btnContainer__2OufU",formStyles:"main_formStyles__3up6s",next:"main_next__29D9s",GotoHome:"main_GotoHome__2oWXt",Home:"main_Home__1nbMx",AddMeetingForm:"main_AddMeetingForm__2GzmQ",selectDiv:"main_selectDiv__3mjCS"}},50:function(e,t,n){e.exports=n(71)},55:function(e,t,n){},56:function(e,t,n){},64:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),l=n(42),r=(n(55),n(11)),o=n(12),m=n(14),c=n(13),s=n(6),u=n(15),d=(n(56),n(5)),g=n.n(d),h=n(16),b=n(32),v=n(25);function E(){var e=Object(b.a)(["\n    mutation AddMeeting(\n        $id:Int!,\n        $title: String!,\n        $date: String!,\n        $startTime: String!,\n        $endTime: String!,\n        $meetingRoomId: Int!) {\n\n        Meeting(id: $id,title:$title,date:$date,startTime:$startTime,endTime:$endTime,meetingRoomId: $meetingRoomId) {\n            id\n            title\n        }\n    }\n"]);return E=function(){return e},e}function f(){var e=Object(b.a)(["\n    query {\n        Buildings {\n            name\n            meetingRooms{\n                name\n                meetings{\n                    title\n                    date\n                    startTime\n                    endTime\n                }\n            }\n        }\n    }"]);return f=function(){return e},e}function p(){var e=Object(b.a)(["\n    query {\n        MeetingRooms {\n            name\n            id\n            floor\n            building {\n                name\n                id\n            }\n            meetings {\n                title\n                date\n                startTime\n                id\n                endTime\n            }\n        }\n    }\n"]);return p=function(){return e},e}var O=Object(v.b)(p()),T=Object(v.b)(f()),R=Object(v.b)(E()),j=function(e){function t(e){return Object(r.a)(this,t),Object(m.a)(this,Object(c.a)(t).call(this,e))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return i.a.createElement(h.c,{query:T},function(e){return e.loading?i.a.createElement("p",null,"loading..."):e.error?i.a.createElement("p",null,e.error.message):e.data&&i.a.createElement("div",{className:g.a.container},i.a.createElement("div",{className:g.a.innerContainer},i.a.createElement("h3",null,"Buildings ",i.a.createElement("br",null),i.a.createElement("span",null,"Total: ",JSON.stringify(e.data.Buildings.length)))))})}}]),t}(a.Component),C=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(m.a)(this,Object(c.a)(t).call(this,e))).getMeetings=n.getMeetings.bind(Object(s.a)(n)),n.TDate=new Date(Date.now()).toLocaleString().split(",")[0],n.TTime=new Date(Date.now()).toLocaleTimeString(navigator.language,{hour:"2-digit",minute:"2-digit"}).replace(/(:\d{2}| [AP]M)$/,""),n}return Object(u.a)(t,e),Object(o.a)(t,[{key:"getMeetings",value:function(e){var t=this;this.totalMeetings=0,this.totalMeetingsToday=0,this.totalMeetingsGoingOn=0,e.map(function(e,n){var a=e.meetings;t.totalMeetings+=a.length,a.map(function(e){e.date===t.TDate&&t.totalMeetingsToday++,e.startTime<t.TTime&&e.endTime>t.TTime&&t.totalMeetingsGoingOn++})})}},{key:"render",value:function(){var e=this;return i.a.createElement(h.c,{query:O},function(t){return t.loading?i.a.createElement("p",null,"loading..."):t.error?i.a.createElement("p",null,t.error.message):t.data&&i.a.createElement("div",{className:g.a.innerContainer},e.getMeetings(t.data.MeetingRooms),i.a.createElement("h3",null,"Meetings ",i.a.createElement("br",null),i.a.createElement("div",null,i.a.createElement("span",null,"Total: ",e.totalMeetings)),i.a.createElement("div",null,i.a.createElement("span",null,"Total Meeting Today: ",e.totalMeetingsToday)),i.a.createElement("div",null,i.a.createElement("span",null,"Total going on now: ",e.totalMeetingsGoingOn)),i.a.createElement("div",null)))})}}]),t}(a.Component),y=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(m.a)(this,Object(c.a)(t).call(this,e))).cal=n.cal.bind(Object(s.a)(n)),n}return Object(u.a)(t,e),Object(o.a)(t,[{key:"cal",value:function(e){var t=0;return e.map(function(e,n){t+=e.meetings.length}),t}},{key:"render",value:function(){return i.a.createElement(h.c,{query:O},function(e){return e.loading?i.a.createElement("p",null,"loading..."):e.error?i.a.createElement("p",null,e.error.message):i.a.createElement("div",{className:g.a.innerContainer},i.a.createElement("h3",null,"Rooms ",i.a.createElement("br",null),i.a.createElement("div",null,i.a.createElement("span",null,"Total: ",JSON.stringify(e.data.MeetingRooms.length))),i.a.createElement("div",null)))})}}]),t}(a.Component),S=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(m.a)(this,Object(c.a)(t).call(this,e))).state={date:"",startTime:"",endTime:"",title:""},n.handleDateChange=n.handleDateChange.bind(Object(s.a)(n)),n.handlestartTimeChange=n.handlestartTimeChange.bind(Object(s.a)(n)),n.handleendTimeChange=n.handleendTimeChange.bind(Object(s.a)(n)),n.handletitleChange=n.handletitleChange.bind(Object(s.a)(n)),n}return Object(u.a)(t,e),Object(o.a)(t,[{key:"handletitleChange",value:function(e){this.setState({title:e.target.value})}},{key:"handleDateChange",value:function(e){var t=new Date(Date.now()).toLocaleString().split(",")[0].split("/").reverse().join("-");e.target.value<t?window.alert(" Date of meeting must be more than today's date"):this.setState({date:e.target.value})}},{key:"handlestartTimeChange",value:function(e){this.setState({startTime:e.target.value})}},{key:"handleendTimeChange",value:function(e){e.target.value<this.state.startTime?window.alert("endTime of meeting must be more than start time"):this.setState({endTime:e.target.value})}},{key:"render",value:function(){var e=this,t=this.props.nextStateChange;return i.a.createElement("div",null,i.a.createElement("div",{className:g.a.AddMeetingForm},i.a.createElement("div",null,i.a.createElement("form",{name:"addMeet",className:g.a.formStyles},i.a.createElement("div",null,i.a.createElement("label",null,"Title:"),i.a.createElement("input",{type:"text",value:this.state.title,onChange:this.handletitleChange})),i.a.createElement("br",null),i.a.createElement("div",null,i.a.createElement("label",null,"Date:"),i.a.createElement("input",{type:"date",value:this.state.date,onChange:this.handleDateChange})),i.a.createElement("br",null),i.a.createElement("div",null,i.a.createElement("label",null,"Start Time:"),i.a.createElement("input",{type:"time",value:this.state.startTime,onChange:this.handlestartTimeChange})),i.a.createElement("br",null),i.a.createElement("div",null,i.a.createElement("label",null,"End Time:"),i.a.createElement("input",{type:"time",value:this.state.endTime,onChange:this.handleendTimeChange})),i.a.createElement("br",null)))),i.a.createElement("input",{type:"button",className:g.a.btnContainerAddMeet,onClick:function(n){n.preventDefault(),t(n,e.state)},value:"NEXT"}))}}]),t}(a.Component),M=(n(64),function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(m.a)(this,Object(c.a)(t).call(this,e))).getRoomDetails=n.getRoomDetails.bind(Object(s.a)(n)),n.mutateFreeRoom=n.mutateFreeRoom.bind(Object(s.a)(n)),n.getFreeRoomsFromMRooms=n.getFreeRoomsFromMRooms.bind(Object(s.a)(n)),n.addOption=n.addOption.bind(Object(s.a)(n)),n.handleSelect=n.handleSelect.bind(Object(s.a)(n)),n.meetingRoomId="",n.state={freeRoomSelected:!1,buildingName:"Building 8"},n}return Object(u.a)(t,e),Object(o.a)(t,[{key:"handleSelect",value:function(e){this.setState({buildingName:e.target.value})}},{key:"addOption",value:function(e){return e.map(function(e,t){return i.a.createElement("option",{key:t,value:e.name},e.name)})}},{key:"mutateFreeRoom",value:function(e){var t=this;return function(n){t.meetingRoomId=e.id,t.setState({freeRoomSelected:!0})}}},{key:"getRoomDetails",value:function(e){var t=this,n=this.getFreeRoomsFromMRooms(e);return e.map(function(e,a){return Array.isArray(n)&&n[a].some(function(e){return!1===e})?i.a.createElement("div",{key:a,className:g.a.innerContainer},i.a.createElement("p",null,"Meeting Room ",i.a.createElement("span",{className:g.a.meetName},e.name),"  not available at this point,try different combination")):t.state.buildingName===e.building.name?i.a.createElement("div",{key:a,onClick:t.mutateFreeRoom(e),className:g.a.innerContainer},i.a.createElement("div",null,e.name),i.a.createElement("div",null,"Floor:",e.floor),i.a.createElement("div",null,"building:",e.building.name)):i.a.createElement("div",{key:a,className:g.a.innerContainer},i.a.createElement("p",null,"NO Meeting Rooms  not available at this point in this building"))})}},{key:"getFreeRoomsFromMRooms",value:function(e){var t=this.props.freeRoomstate;return t.date=t.date.split("-").reverse().join("/"),e.map(function(e){var n=e.meetings;return 0===n.length||n.map(function(e){return t.date===e.date?t.endTime<e.startTime&&t.endTime<e.endTime||t.startTime>e.startTime&&t.startTime>e.endTime:null})})}},{key:"render",value:function(){var e=this,t=this.props,n=t.selectFreeRoom,a=t.freeRoomstate;return i.a.createElement("div",{className:g.a.Home},i.a.createElement(h.c,{query:T},function(t){return t.loading?i.a.createElement("p",null,"loading..."):t.error?i.a.createElement("p",null,t.error.message):t.data&&i.a.createElement("div",{className:g.a.selectDiv},i.a.createElement("label",null,"Select Building :"),i.a.createElement("select",{name:"building",onChange:e.handleSelect},e.addOption(t.data.Buildings)))}),i.a.createElement(h.c,{query:O},function(t){if(t.loading)return i.a.createElement("p",null,"loading...");if(t.error)return i.a.createElement("p",null,t.error.message);var n=t.data.MeetingRooms;return t.data&&i.a.createElement("div",{className:g.a.container},i.a.createElement("div",{className:g.a.innerContainer},!e.state.freeRoomSelected&&e.getRoomDetails(n)))}),this.state.freeRoomSelected&&i.a.createElement(h.b,{mutation:R},function(t,l){l.data;return e.setState({freeRoomSelected:!1}),t({variables:{id:parseInt(100*Math.random()),title:a.title,date:a.date.split("-").reverse().join("/"),startTime:a.startTime,endTime:a.endTime,meetingRoomId:parseInt(e.meetingRoomId)}}).then(function(e){console.log(e),n(a)}),i.a.createElement("div",null)}))}}]),t}(a.Component)),_=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(m.a)(this,Object(c.a)(t).call(this,e))).state={home:!0,next:!1,selectRoom:!1,freeRoomstate:{}},n.selectFreeRoom=n.selectFreeRoom.bind(Object(s.a)(n)),n.meetingRoomAdd=n.meetingRoomAdd.bind(Object(s.a)(n)),n}return Object(u.a)(t,e),Object(o.a)(t,[{key:"selectFreeRoom",value:function(e){console.log(e),this.setState({selectRoom:!1,next:!1,home:!0}),window.location.reload(!1)}},{key:"meetingRoomAdd",value:function(e,t){this.setState({selectRoom:!0,next:!1,home:!1,freeRoomstate:t})}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"App"},i.a.createElement("div",{className:g.a.GotoHome,onClick:function(){e.setState({selectRoom:!1,next:!1,home:!0}),window.location.reload(!1)}},"GOTO HOMEPAGE"),this.state.home&&i.a.createElement("div",{className:g.a.Home},i.a.createElement(j,null),i.a.createElement(y,null),i.a.createElement(C,null),i.a.createElement("div",{className:g.a.next},i.a.createElement("div",{className:g.a.btnContainer,onClick:function(){e.setState({next:!0,selectRoom:!1,home:!1})}},"Add a meeting"))),this.state.next&&i.a.createElement("div",null,i.a.createElement(S,{nextStateChange:this.meetingRoomAdd})),this.state.selectRoom&&i.a.createElement("div",null,i.a.createElement(M,{freeRoomstate:this.state.freeRoomstate,selectFreeRoom:this.selectFreeRoom})))}}]),t}(a.Component),k=n(47),N=n(22),D=new(n(21).a),w=new v.a({uri:"https://smart-meeting.herokuapp.com",cache:D,request:function(e){e.setContext({headers:{token:"a123gjhgjsdf657622"}})},connectToDevTools:!0});Object(l.render)(i.a.createElement(h.a,{client:w},i.a.createElement(k.a,null,i.a.createElement(N.c,null,i.a.createElement(N.a,{exact:!0,path:"/",component:_}),i.a.createElement(N.a,{component:_})))),document.getElementById("root"))}},[[50,1,2]]]);
//# sourceMappingURL=main.bed7a94b.chunk.js.map
